<!DOCTYPE html>
<html>
<head>
    <title>Test Vercel Frontend</title>
</head>
<body>
    <h1>Testing Vercel Frontend</h1>
    
    <h2>Test 1: Root page</h2>
    <button onclick="fetchRoot()">Test /</button>
    
    <h2>Test 2: Check environment</h2>
    <button onclick="checkEnv()">Check Environment Variables</button>
    
    <h2>Test 3: Direct OAuth</h2>
    <a href="https://xborg-tech-challenge-production.up.railway.app/auth/login/google" target="_blank">
        Test backend OAuth directly
    </a>
    
    <div id="result" style="margin: 20px; padding: 15px; border: 1px solid #ccc; min-height: 100px;"></div>
    
    <script>
        const resultDiv = document.getElementById('result');
        
        async function fetchRoot() {
            resultDiv.innerHTML = 'Fetching /...';
            try {
                const response = await fetch('https://xborg-tech-challenge-rose.vercel.app/');
                resultDiv.innerHTML = `
                    Status: ${response.status} ${response.statusText}<br>
                    URL: ${response.url}<br>
                    Redirected: ${response.redirected}<br>
                    <hr>
                    Headers:<br>
                    ${Array.from(response.headers.entries()).map(([k, v]) => `${k}: ${v}`).join('<br>')}
                `;
            } catch (error) {
                resultDiv.innerHTML = `Error: ${error.message}`;
            }
        }
        
        async function checkEnv() {
            resultDiv.innerHTML = 'Checking environment...';
            try {
                // Try to access a page that might show env vars
                const response = await fetch('https://xborg-tech-challenge-rose.vercel.app/api/hello');
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                } else {
                    resultDiv.innerHTML = `API not available: ${response.status}`;
                    
                    // Try to get page source to check for API_URL
                    const pageResponse = await fetch('https://xborg-tech-challenge-rose.vercel.app/');
                    const html = await pageResponse.text();
                    const hasLocalhost = html.includes('localhost:3001');
                    const hasRailway = html.includes('railway.app');
                    
                    resultDiv.innerHTML += `<br><br>Page contains:<br>`;
                    resultDiv.innerHTML += `localhost:3001: ${hasLocalhost ? 'YES ❌' : 'NO ✅'}<br>`;
                    resultDiv.innerHTML += `railway.app: ${hasRailway ? 'YES ✅' : 'NO ❌'}`;
                }
            } catch (error) {
                resultDiv.innerHTML = `Error: ${error.message}`;
            }
        }
        
        // Auto-run tests
        window.onload = fetchRoot;
    </script>
</body>
</html>
